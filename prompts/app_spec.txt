<project_specification>
  <project_name>Ops Monitor</project_name>

  <overview>
    An internal DevOps and operations monitoring dashboard for a fintech company, designed to be displayed on multiple TV screens across the office for ~40 employees. The dashboard provides real-time visibility into infrastructure health, Kubernetes clusters, deployments, payment processing, and alerts with auto-rotating views optimized for large displays.
  </overview>

  <technology_stack>
    <frontend>
      <framework>React with TypeScript</framework>
      <styling>Tailwind CSS with dark mode</styling>
      <charts>Recharts for data visualization</charts>
      <state>React Query for data fetching and caching</state>
      <build>Vite for development and building</build>
    </frontend>
    <backend>
      <runtime>Python 3.11+ with FastAPI</runtime>
      <database>SQLite with sqlite3 standard library</database>
      <scheduling>APScheduler for polling external services</scheduling>
      <async>uvicorn ASGI server</async>
    </backend>
    <communication>
      <api>REST API with JSON</api>
      <realtime>Server-Sent Events (SSE) for live updates</realtime>
    </communication>
  </technology_stack>

  <prerequisites>
    <environment_setup>
      - Python 3.11+ installed
      - Node.js 18+ installed (for frontend)
      - pip and venv for Python dependencies
      - npm for frontend dependencies
      - Environment variables configured for external service placeholders
    </environment_setup>
  </prerequisites>

  <security_and_access_control>
    <complexity_tier>Simple</complexity_tier>
    <test_count_target>150+</test_count_target>
    <user_roles>
      <role name="viewer">
        <permissions>
          - Can view all dashboard screens
          - Can see all metrics and alerts
          - Cannot modify settings or thresholds
        </permissions>
        <protected_routes>
          - /admin/* (admin only)
        </protected_routes>
      </role>
      <role name="admin">
        <permissions>
          - Can view all dashboard screens
          - Can configure data source connections
          - Can set alert thresholds
          - Can customize dashboard layout and panels
          - Can manage rotation settings
        </permissions>
        <protected_routes>
          - Full access to all routes
        </protected_routes>
      </role>
    </user_roles>
    <authentication>
      <method>Simple password protection for admin panel</method>
      <session_timeout>24 hours</session_timeout>
      <password_requirements>Admin password stored in environment variable</password_requirements>
    </authentication>
    <sensitive_operations>
      - Changing data source credentials requires admin password
      - Modifying alert thresholds requires admin password
    </sensitive_operations>
  </security_and_access_control>

  <core_features>
    <dashboard_views>
      - Auto-rotating dashboard with 30-second intervals
      - Infrastructure Overview panel
      - Kubernetes & Containers panel
      - Deployments & CI/CD panel
      - Payments & Providers panel
      - Alerts & Incidents panel
      - Full-screen TV display mode
      - Manual view navigation override
      - Pause/resume rotation
    </dashboard_views>

    <infrastructure_monitoring>
      - Server health status indicators
      - Overall uptime percentage display
      - API response time metrics
      - Error rate tracking and display
      - CPU usage indicators
      - Memory usage indicators
      - Disk usage indicators
      - Network latency metrics
      - Service status grid
      - Health check endpoint monitoring
      - 24-hour trend mini-charts
      - Status color coding (green/yellow/red)
    </infrastructure_monitoring>

    <kubernetes_monitoring>
      - Cluster health overview
      - Pod status display (running/pending/failed)
      - Pod restart counts
      - Downtime logs viewer
      - Container resource usage
      - Node status indicators
      - Namespace overview
      - Deployment replica status
      - Recent crash loop detection
      - Pod age and uptime
      - Resource limit warnings
    </kubernetes_monitoring>

    <deployment_cicd>
      - Recent deployments list
      - Deployment status indicators
      - Pipeline status display
      - Build success/failure rates
      - Last deployment timestamp
      - Deployment frequency metrics
      - Failed deployment alerts
      - Rollback indicators
      - Environment deployment status (dev/staging/prod)
      - Commit/PR references
    </deployment_cicd>

    <payment_monitoring>
      - Transaction volume counters
      - Payment success rate percentage
      - Payment provider status (Stripe, etc.)
      - Provider health indicators
      - Transaction processing latency
      - Failed transaction alerts
      - Provider degradation warnings
      - Settlement status
      - Chargeback rate monitoring
      - Payment method breakdown
    </payment_monitoring>

    <alerting>
      - Active alerts display
      - Alert severity levels (critical/warning/info)
      - Alert timestamp and duration
      - Alert acknowledgment status
      - Recent incidents timeline
      - Alert count by category
      - Server down alerts
      - Error rate spike alerts (>5% threshold)
      - API latency threshold alerts
      - Payment provider down alerts
      - Deployment failure alerts
      - Kubernetes pod crash alerts
      - Visual color-coded alerts (no sound)
    </alerting>

    <historical_data>
      - 24-hour historical charts
      - Trend indicators (up/down arrows)
      - Peak/low markers
      - Time-series graphs
      - Comparative metrics (now vs 24h ago)
    </historical_data>

    <admin_panel>
      - Data source configuration
      - Alert threshold settings
      - Dashboard layout customization
      - Rotation speed settings
      - Panel visibility toggles
      - Placeholder credential management
      - Refresh interval settings
      - Test connection buttons
    </admin_panel>

    <display_optimization>
      - Dark mode theme (TV optimized)
      - Large readable fonts
      - High contrast colors
      - Auto-scaling for different screen sizes
      - Minimal UI chrome for TV display
      - Clock/timestamp display
      - Last updated indicator
    </display_optimization>
  </core_features>

  <database_schema>
    <tables>
      <data_sources>
        - id, name, type, endpoint_url, api_key_placeholder, polling_interval, enabled, created_at, updated_at
      </data_sources>
      <metrics>
        - id, source_id, metric_name, metric_value, metric_unit, recorded_at
      </metrics>
      <alerts>
        - id, source_id, alert_type, severity, message, triggered_at, acknowledged, acknowledged_at, resolved_at
      </alerts>
      <alert_thresholds>
        - id, metric_name, warning_threshold, critical_threshold, comparison_operator, enabled
      </alert_thresholds>
      <deployments>
        - id, environment, status, commit_hash, deployed_by, started_at, completed_at
      </deployments>
      <kubernetes_events>
        - id, cluster_name, namespace, pod_name, event_type, message, occurred_at
      </kubernetes_events>
      <payment_transactions>
        - id, provider, status, amount, currency, processed_at
      </payment_transactions>
      <dashboard_settings>
        - id, setting_key, setting_value, updated_at
      </dashboard_settings>
      <admin_users>
        - id, username, password_hash, last_login, created_at
      </admin_users>
    </tables>
  </database_schema>

  <api_endpoints_summary>
    <dashboard>
      - GET /api/dashboard/views (get all dashboard view configs)
      - GET /api/dashboard/current (get current rotation view)
      - GET /api/dashboard/settings (get display settings)
      - PUT /api/dashboard/settings (update display settings)
    </dashboard>
    <infrastructure>
      - GET /api/infrastructure/health (overall health summary)
      - GET /api/infrastructure/servers (server status list)
      - GET /api/infrastructure/metrics (current metrics)
      - GET /api/infrastructure/history (24h historical data)
    </infrastructure>
    <kubernetes>
      - GET /api/kubernetes/clusters (cluster overview)
      - GET /api/kubernetes/pods (pod status list)
      - GET /api/kubernetes/events (recent events/downtime logs)
      - GET /api/kubernetes/metrics (resource usage)
    </kubernetes>
    <deployments>
      - GET /api/deployments/recent (recent deployments)
      - GET /api/deployments/pipelines (pipeline status)
      - GET /api/deployments/stats (deployment statistics)
    </deployments>
    <payments>
      - GET /api/payments/status (payment system status)
      - GET /api/payments/providers (provider health)
      - GET /api/payments/metrics (transaction metrics)
      - GET /api/payments/history (24h transaction history)
    </payments>
    <alerts>
      - GET /api/alerts/active (current active alerts)
      - GET /api/alerts/history (alert history)
      - PUT /api/alerts/:id/acknowledge (acknowledge alert)
      - GET /api/alerts/thresholds (get thresholds)
      - PUT /api/alerts/thresholds (update thresholds)
    </alerts>
    <admin>
      - POST /api/admin/login (admin authentication)
      - GET /api/admin/sources (data source configs)
      - PUT /api/admin/sources/:id (update data source)
      - POST /api/admin/sources/test (test connection)
    </admin>
    <realtime>
      - GET /api/stream (SSE endpoint for live updates)
    </realtime>
  </api_endpoints_summary>

  <ui_layout>
    <main_structure>
      Full-screen dashboard with rotating views. Each view fills the entire screen with a grid of metric panels. Minimal header showing current time, view name, and rotation indicator. No sidebar or navigation visible in TV mode.
    </main_structure>
    <view_layouts>
      <infrastructure_view>
        - Top row: Uptime %, Error Rate %, Avg Response Time
        - Middle: Server health grid (colored status boxes)
        - Bottom: 24h trend charts for key metrics
      </infrastructure_view>
      <kubernetes_view>
        - Top row: Cluster health, Pod counts by status
        - Middle: Pod status grid with color coding
        - Bottom: Recent downtime events log
      </kubernetes_view>
      <deployments_view>
        - Top row: Deployment frequency, Success rate
        - Middle: Recent deployments list with status
        - Bottom: Pipeline status indicators
      </deployments_view>
      <payments_view>
        - Top row: Transaction volume, Success rate
        - Middle: Provider status cards
        - Bottom: 24h transaction trend chart
      </payments_view>
      <alerts_view>
        - Full view: Active alerts list sorted by severity
        - Sidebar: Alert counts by category
        - Bottom: Recent incidents timeline
      </alerts_view>
    </view_layouts>
    <admin_panel>
      Separate admin route with sidebar navigation. Forms for configuring data sources, thresholds, and display settings. Protected by password.
    </admin_panel>
  </ui_layout>

  <design_system>
    <color_palette>
      <background>#0f172a (slate-900)</background>
      <surface>#1e293b (slate-800)</surface>
      <border>#334155 (slate-700)</border>
      <text_primary>#f8fafc (slate-50)</text_primary>
      <text_secondary>#94a3b8 (slate-400)</text_secondary>
      <status_healthy>#22c55e (green-500)</status_healthy>
      <status_warning>#eab308 (yellow-500)</status_warning>
      <status_critical>#ef4444 (red-500)</status_critical>
      <status_unknown>#6b7280 (gray-500)</status_unknown>
      <accent>#3b82f6 (blue-500)</accent>
    </color_palette>
    <typography>
      <font_family>Inter, system-ui, sans-serif</font_family>
      <metric_large>4rem bold for big numbers</metric_large>
      <metric_medium>2rem for secondary metrics</metric_medium>
      <labels>1rem for labels and descriptions</labels>
    </typography>
    <spacing>
      Large padding and gaps for TV readability. Minimum touch targets not required (view-only display).
    </spacing>
  </design_system>

  <data_source_placeholders>
    <aws_cloudwatch>
      - AWS_ACCESS_KEY_ID=your-access-key
      - AWS_SECRET_ACCESS_KEY=your-secret-key
      - AWS_REGION=us-east-1
    </aws_cloudwatch>
    <kubernetes>
      - KUBE_API_SERVER=https://your-cluster-api
      - KUBE_TOKEN=your-service-account-token
    </kubernetes>
    <github_actions>
      - GITHUB_TOKEN=your-github-token
      - GITHUB_ORG=your-organization
    </github_actions>
    <stripe>
      - STRIPE_API_KEY=your-stripe-key
    </stripe>
    <datadog>
      - DATADOG_API_KEY=your-datadog-key
      - DATADOG_APP_KEY=your-app-key
    </datadog>
    <pagerduty>
      - PAGERDUTY_API_KEY=your-pagerduty-key
    </pagerduty>
  </data_source_placeholders>

  <implementation_steps>
    <step number="1">
      <title>Project Setup & Core Infrastructure</title>
      <tasks>
        - Initialize React frontend with TypeScript and Tailwind
        - Set up Node.js backend with Express
        - Configure SQLite database with schema
        - Implement basic API structure
        - Set up SSE for real-time updates
      </tasks>
    </step>
    <step number="2">
      <title>Dashboard Framework</title>
      <tasks>
        - Build rotating view system with 30s intervals
        - Create full-screen TV display mode
        - Implement dark theme design system
        - Build reusable metric panel components
        - Add time/status header bar
      </tasks>
    </step>
    <step number="3">
      <title>Infrastructure Monitoring View</title>
      <tasks>
        - Build server health grid component
        - Create uptime/error rate/response time panels
        - Add 24h trend mini-charts
        - Implement health check polling
        - Connect to placeholder data sources
      </tasks>
    </step>
    <step number="4">
      <title>Kubernetes Monitoring View</title>
      <tasks>
        - Build pod status grid
        - Create cluster health overview
        - Implement downtime logs display
        - Add resource usage indicators
        - Connect to Kubernetes API placeholder
      </tasks>
    </step>
    <step number="5">
      <title>Deployments & CI/CD View</title>
      <tasks>
        - Build recent deployments list
        - Create pipeline status indicators
        - Add deployment statistics panel
        - Implement deployment frequency charts
        - Connect to GitHub Actions placeholder
      </tasks>
    </step>
    <step number="6">
      <title>Payments Monitoring View</title>
      <tasks>
        - Build provider status cards
        - Create transaction volume counters
        - Add success rate indicators
        - Implement transaction trend charts
        - Connect to payment provider placeholders
      </tasks>
    </step>
    <step number="7">
      <title>Alerting System</title>
      <tasks>
        - Build active alerts display
        - Implement alert severity color coding
        - Create incidents timeline
        - Add alert thresholds checking
        - Build alert acknowledgment system
      </tasks>
    </step>
    <step number="8">
      <title>Admin Panel</title>
      <tasks>
        - Build admin login page
        - Create data source configuration forms
        - Add threshold settings interface
        - Implement dashboard customization
        - Add connection testing functionality
      </tasks>
    </step>
    <step number="9">
      <title>Polish & Optimization</title>
      <tasks>
        - Optimize for TV display performance
        - Add loading states and error handling
        - Implement data caching
        - Test on various screen sizes
        - Final UI polish and refinements
      </tasks>
    </step>
  </implementation_steps>

  <success_criteria>
    <functionality>
      - All five dashboard views display correctly and rotate automatically
      - Real-time data updates without page refresh
      - All placeholder data sources can be configured
      - Alerts trigger based on configured thresholds
      - Admin can modify settings and thresholds
    </functionality>
    <user_experience>
      - Dashboard is readable from across a room on TV screens
      - Status is immediately clear at a glance (color coding works)
      - Rotation is smooth and non-disruptive
      - Historical trends provide useful context
    </user_experience>
    <technical_quality>
      - Application runs reliably for extended periods
      - Data refresh is efficient and doesn't overload sources
      - Error states are handled gracefully
      - 150+ tests covering core functionality
    </technical_quality>
    <design_polish>
      - Dark mode is visually appealing on large displays
      - Typography is clear and readable
      - Color coding is consistent and intuitive
      - Layout adapts well to different screen sizes
    </design_polish>
  </success_criteria>
</project_specification>
